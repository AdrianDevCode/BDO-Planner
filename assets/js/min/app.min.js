/*
* @Author: SirMrE
* @http: http://www.sirmre.com/bdo-calculator
* @Copyright: (c) 2016 Mark Eliasen
* @license: May be freely distributed under the CC BY-NC 3.0 License 
*           (https://creativecommons.org/licenses/by-nc/3.0/)
* @Date:   2016-04-07 20:53:22
* @Last Modified by:   SirMrE
* @Last Modified time: 2016-04-09 19:27:44
*/
!function($){"use strict";function t(t){return"[object Array]"===Object.prototype.toString.call(t)}function a(a,e,n,c){n="function"==typeof n?n:function(){},c="undefined"==typeof c?"":c;var l=[];if(t(e))l=e;else for(var r in e)e.hasOwnProperty(r)&&l.push(r);"string"==typeof a&&(a=$(a)),a.select2({width:"100%",data:"undefined"==typeof a.attr("placeholder")?l:[a.attr("placeholder")].concat(l)}),n()}var e="";$(document).ready(function(){a("#player-class",BDOdatabase.classes,function(){$("#player-class-section").slideDown()}),$("#player-class").on("change",function(){var t=$("#calculator-section select").length-1;e=$(this).val().toLowerCase(),$(this).slideUp("fast",function(){$("#calculator-section select").each(function(n,c){var l=$(c),r,o;l.parent("div").hasClass("enhancement")?a(l,Array.apply(null,{length:(-1===$.inArray(l.attr("data-type"),["rings","earrings","belt","necklace"])?BDOdatabase.max_gear_enhancement:BDOdatabase.max_acc_enhancement)+1}).map(Number.call,Number)):(o=BDOdatabase.items[l.attr("data-itemset")],r="undefined"==typeof o[e]?o:o[e],"undefined"!=typeof o.all&&(r=r.concat(o.all)),a(l,r)),t===n&&(BDOcalculator.init(),BDOcalculator.calculate(),$("#calculator-section").slideDown("fast"))})})}),$("#calculator-section div:not(.enhancement) > select").on("change",function(){var t=BDOdatabase.items[$(this).attr("data-itemset")],a=$(this).attr("data-type"),n=$(this).attr("data-item");-1!==$.inArray(a,["main-weapon","secondary-weapon"])&&(t=t[e.toLowerCase()]),t=t[$(this).val()],BDOcalculator.setGear(t,a,n,0,function(){BDOcalculator.calculate()})}),$("#calculator-section div.enhancement > select").on("change",function(){var t=$(this).val(),a=$(this).attr("data-type"),e=$(this).attr("data-item");BDOcalculator.setEnchantmentLevel(a,e,t,function(){BDOcalculator.calculate()})})})}(jQuery);